{{ define "main" }}
  {{ $paginator := .Paginate (where .Site.RegularPages "Type" "post") .Site.Params.pagination_size }}
  <h1 id="skip-to-content">Blog Posts</h1>
  <nav role="navigation" aria-label="Blog postings pagination" class="paginator">
    {{- with $paginator }}
      {{- if .HasNext }}<a accesskey="p" href="{{ .Next.URL }}" rel="prev">Previous posts</a>{{- end }}{{- if and .HasNext .HasPrev}}&nbsp;|&nbsp;{{- end }}{{- if .HasPrev }}<a accesskey="n" href="{{ .Prev.URL }}" rel="next">Next posts</a>{{- end }}
      Page {{ .PageNumber }} of {{ .TotalPages }}
    {{- end }}
  </nav>
  <ol aria-labelledby="skip-to-content">
  {{ range $index, $object := $paginator.Pages }}
  {{ with $object }}
  <li>
    <h2><a accesskey="{{ $index }}" href="{{ .RelPermalink }}" id="ctrl+mod+{{ $index }}" rel="bookmark"><cite>{{ .Title }}</cite></a></h2>
    <dl aria-label="Metadata">
      {{- with .Date }}<dt>Published:</dt><dd><time datetime="{{ dateFormat $.Site.Params.iso8601_format . }}">{{ dateFormat "2006-01-02" . }}</time></dd>{{- end }}
      {{ if ne .Lastmod .Date }}
        <dt>Last Modified:</dt>
        <dd><time datetime="{{ .Lastmod.Format $.Site.Params.iso8601_format }}">{{ .Lastmod.Format "2006-01-02" }}</time></dd>
      {{ end }}
      {{- with .Params.tags }}
        <dt>Tags:</dt>
        <dd>
          {{ partial "tags.html" . }}
        </dd>
      {{- end }}
      {{- with .Params.series }}
        {{- range (where $.Site.Data.series "key" "eq" .) }}
          {{- $title := .title }}
          <dt>Series:</dt>
          <dd><a href="{{ "series" | absURL }}/{{ .key | urlize }}" rel="bookmark">{{ $title }}</a></dd>
        {{- end }}
      {{- end }}
    </dl>
  </li>
  {{ end }}
  {{ end }}
  </ol>
  <nav aria-hidden="true" class="paginator">
    {{- with $paginator }}
      {{- if .HasNext }}<a href="{{ .Next.URL }}" rel="prev">Previous posts</a>{{- end }}{{- if and .HasNext .HasPrev}}&nbsp;|&nbsp;{{- end }}{{- if .HasPrev }}<a href="{{ .Prev.URL }}" rel="next">Next posts</a>{{- end }}
      Page {{ .PageNumber }} of {{ .TotalPages }}
    {{- end }}
  </nav>
{{ end }}
